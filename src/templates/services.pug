extends inc/page.pug
block template
  :php
    /*
    Template Name: Services Page
    */
block nav
  include ./inc/navbar-toggle.pug
  include ./inc/side-nav.pug
  include ./inc/header.pug
block content
  :php
    $breadcrumbs = [];
    array_push($breadcrumbs,array(
      "title"=>"What is Dynamic Signal?",
      "link"=>"/product/"
    ));

    /* Start the loop */
    if( have_posts() ){
     while( have_posts() ) {
      the_post();

    /* Write integrations logos */
    echo "<script>var pageData = {'logos':".json_encode(get_field("integrations_logos"),JSON_UNESCAPED_SLASHES)
    ."};</script>";


  -
    var pageData = {
    "header":"Services" 
    };
  section.top-section-interior
    .container 
      .row
        .col-md-12
          include ./inc/breadcrumbs.pug  
          h1!=pageData.header
  section.services-header
    :php
      printf("<div class='full-width-bg services' data-bg-array='%s'>", json_encode(get_field("header_image"),JSON_UNESCAPED_SLASHES));
    .container
      .row
        .col-sm-6.col-sm-offset-6
          p.quote
            :php
              echo get_field("header_quote");
          cite
            span.name
              :php
                echo get_field("header_citation_name");
            span.title
              :php
                echo get_field("header_citation_job_title");
            span.company
              :php
                echo get_field("header_citation_company");
          p
            a.button.cta.knockout.modal-show(href='#') Play Video
              span.fa.fa-play-circle-o
    :php
      echo "</div>";
  section.service-experience
    .container
      .row
        .col-md-12
          h2
            :php
              echo get_field("experience_section_title");
          h3
            :php
              echo get_field("experience_section_subhead");
          #services-mapbox
            .mapbox-number
              p#map-num(data-counter-min='0',data-counter-max='50+')
          p
            :php
              echo get_field("experience_section_blurb");
      .row.services-proof-points
        :php
          foreach(get_field("experience_proof_points") as $key=>$item) {
            printf("<div class='col-md-4'><div class='svc-experience-box'><div class='checkmark-bucket'>");
        include ./inc/checkmark.pug
        :php
            printf("</div><div class='pp-val' data-counter-min='0' data-counter-max='%s'></div><p>%s</p></div></div>", $item["proof_point_value"],$item["proof_point_description"]);
          }
  section.services-integrations
    .container
      .row
        .col-md-12
          h2
            :php
              get_field("integrations_section_header");
          #services-integrations-logos
  section.services-services
    .container
      .row
        .col-md-12
          h2
            :php
              echo get_field("services_section_header");
          h3
            :php
              echo get_field("services_section_subhead");
          p
            :php
              echo get_field("services_section_blurb");
      .row
        .col-md-12
          :php
              $tabs = [];
              $slides = [];
              foreach(get_field("services_section_slides") as $key=>$slide) {
                $new_tab = array("icon"=>$slide["slide_icon"],"title"=>$slide["slide_nav_title"]);
                $new_slide = sprintf("<div class='services-slide ".($key == 0 ? "active" : "")."' id='services-slide-%s'><h2>%s</h2><div class='user-content'>%s</div></div>", $key,$slide["slide_header"],$slide["slide_content"]);
                array_push($tabs,$new_tab);
                array_push($slides,$new_slide);   
              }
          .services-tabs
            :php
              foreach($tabs as $idx=>$tab) {
            .tab
              :php
                printf("<a href='#' class='tab-button ".($idx==0 ? "active" : "")."' id='tab-%s' data-tab-index='%s'><?xml version='1.0' encoding='utf-8'?>",$idx,$idx);    
              svg(version='1.1', xmlns='http://www.w3.org/2000/svg', xmlns:xlink='http://www.w3.org/1999/xlink', x='0px', y='0px', viewBox='0 0 80 80', style='enable-background:new 0 0 80 80;', xml:space='preserve')
                circle.circle(cx='40', cy='40', r='37.5') 
                :php
                  echo $tab["icon"];
              p
                :php
                  echo $tab["title"]; 
              :php
                echo "</a>";
            :php
              }
          :php
            foreach($slides as $key=>$slide) {
              echo $slide;
            }
  section.services-cs
    .container
      .row
        .col-md-12
          h2
            :php
              echo get_field("cs_Section_header");
          h3
            :php
              echo get_field("cs_section_subhead");
          p
            :php
              echo get_field("cs_section_blurb");
      .row
        .col-md-12
          :php
            $tabs = [];
            $slides = [];
            foreach(get_field("cs_section_slides") as $key=>$slide) {
              $new_tab = sprintf("<div class='tab'><a class='cs-tab-button %s' id='tab-%s' data-tab-index='%s'>%s</a></div>",($key == 0 ? "active" : ""),$key,$key,$slide["nav_title"]);
              $new_slide = sprintf("<div class='services-cs-slide %s' id='services-slide-%s'><h2>%s</h2><div class='user-content'>%s</div></div>", ($key == 0 ? "active" : ""),$key,$slide["slide_title"],$slide["slide_content"]);
              array_push($tabs,$new_tab);
              array_push($slides,$new_slide);   
            }
          .services-cs-tabs
            :php
              foreach($tabs as $idx=>$tab) {
                echo $tab;
              }
          :php
            foreach($slides as $key=>$slide) {
              echo $slide;
            }   
  section.services-community
    :php
      printf("<div class='services-community-header' data-bg-array='%s'><h2>%s</h2></div>",json_encode(get_field("community_section_header_image"),JSON_UNESCAPED_SLASHES),get_field("community_header_text"));
    .container
      :php
        foreach(get_field("community_section_blurbs") as $key=>$blurb) {
          printf("<div class='row'><div class='col-md-6'><h2>%s</h2><p>%s</p></div><div class='col-md-6'><div class='services-community-image' data-bg-array='%s'></div></div></div>",$blurb["blurb_title"],$blurb["blurb_content"],json_encode($blurb["blurb_image"],JSON_UNESCAPED_SLASHES));
        }

  :php
      $video_id = get_field("header_cta_video_id");
     }}
block modals
  .modal
    .modal-dialog
      button.modal-hide!="&times;"
      div.blog-content
        :php
          printf("<div class='video' data-id='%s' data-event='vidClick-Services'></div>",$video_id);    

        
