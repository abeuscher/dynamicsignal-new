extends inc/page.pug
block template
  :php
    /*
    Template Name: Home Page New 2019 Look
    */
block nav
  include ./inc/navbar-toggle.pug
  include ./inc/side-nav.pug
  include ./inc/header.pug
block content
  :php
    echo "<script>var pageData = {'logos':".json_encode(get_field( 'logos' ),JSON_UNESCAPED_SLASHES)
    .", 'hero_words':".json_encode(get_field('header_animated_words'))."};</script>";
    printf("<section class='homepage fullpic bigtext no-padding' id='sticky-header' data-bg-array='%s'>",json_encode(get_field("header_bg"), JSON_UNESCAPED_SLASHES));
    printf("<div class='inner' data-bg-array='%s'>",json_encode(get_field("header_mobile_bg"), JSON_UNESCAPED_SLASHES));
  .col-half.text
    h1.home-header-text
      :php
        echo get_field("header_headline");
    p
      :php
        echo get_field("header_copy");
    :php
      printf("<a class='button cta modal-show' data-video-modal-id='s2wzmwLSR-M' data-event='vidClick-HomeCTA' href='#'>%s<span class='fa fa-play-circle-o'></span></a>", get_field("header_cta_text"));
  .col-half
  :php
    echo "</div>";

  :php
    echo "</section>";
  section.white-bg-section.no-padding-bottom
    .container
      .row
        .col-md-12
          #logo-partners-grid
  section.white-bg-section.home-third-section
    .container
      .row
        .col-md-12          
          p.home-secondary
            :php
              echo get_field("secondary_copy");
  section.white-bg-section.phone-section
    .container
      .row
        .col-md-12
          .vertical-carousel
            :php
              $images = "";
              $panels = "";
              foreach (get_field("carousel_slides") as $key=>$slide) {
                $classname = $key == 0 ? "active" : "";
                $images .= sprintf("<div class='vertical-slide %s' data-bg-array='%s' data-index='%s'></div>", $classname,json_encode($slide["slide_image"],JSON_UNESCAPED_SLASHES),$key);
                $panels .= sprintf("<a class='carousel-panel %s' data-index='%s'><h2>%s</h2><h3>%s</h3><p>%s</p></a>",$classname,$key,$slide["title"],$slide["subhead"],$slide["copy"]);
              }
            .carousel-images
              .inner.position-1
                :php
                  echo $images;
            .carousel-panels
              :php
                echo $panels;
              p.source
                :php
                  echo get_field("carousel_source");
  section.demo-videos
    .container
      .demo-video-wrapper
        :php
          foreach (get_field("demo_video_buckets") as $key=>$bucket) {
            printf("<div class='demo-video-bucket'><a href='%s'><h2>%s</h2></a><div class='outer'></div><div class='inner'><h3>%s</h3><p>%s</p></div><div class='button-wrapper'><a class='orange button' data-button-event='%s' href='%s'>%s</a><a class='learn-link' href='%s'>%s</a></div></div>", $bucket["title_link"], $bucket["title"], $bucket["subhead"], $bucket["copy"], "demoVideo_".str_replace(' ', '', $bucket["custom_event_name"]), $bucket["cta_target"],$bucket["cta_text"], $bucket["learn_more_link"],$bucket["learn_more_text"]);
          }
  section.home-featured-article.white-bg-section.no-padding
    .bg.left
    .content
        :php
          $featured = get_field("featured_item");
          printf("<h2><span class='fa fa-star'></span>%s</h2><article role='article' itemprop='haspart' itemscope='' itemtype='http://schema.org/Article'><div class='home-featured-thumb' data-bg-array='%s'></div><h3 itemprop='headline'>%s</h3><a class='orange button' href='%s' itemprop='url'>%s</a></article>", $featured["section_title"], json_encode($featured["image"], JSON_UNESCAPED_SLASHES), $featured["item_title"], $featured["cta_link"], $featured["cta_label"]);
    .bg.right
  section.home-featured-ebook
    .container
      .col-md-6
        :php
          $ebook = get_field("featured_ebook");
          printf("<div class='home-ebook-thumb' data-bg-array='%s'></div>", json_encode($ebook["image"], JSON_UNESCAPED_SLASHES));
      .col-md-6
        :php
          printf("<h2>%s</h2><p>%s</p><a class='knockout button' href='%s'>%s</a>", $ebook["title"], $ebook["description"], $ebook["cta_link"], $ebook["cta_label"]);
  :php
    printf("<section class='homepage-partners white-bg-section' data-bg-array='%s'><div class='container'><div class='row'><div class='col-md-12'><h2>%s</h2><p>%s</p><a class='button cta' href='%s'>%s</a></div></div></div></section>", json_encode(get_field("partner_section_bg"),JSON_UNESCAPED_SLASHES),get_field("partner_section_headline"),get_field("partner_section_copy"),get_field("partners_section_cta_target"),get_field("partners_section_cta_text"));
  section.white-bg-section
    .container
      .row
        .col-md-6
          :php
            printf("<a class='homepage-panel-link centered' href='%s' data-bg-array='%s'><div class='inner'><h2>%s</h2><p>%s</p></div><div class='panel-cta'>%s<span class='fa fa-check-circle-o'></span></div></a>", get_field("assessment_link_target"),json_encode(get_field("assessment_link_bg"),JSON_UNESCAPED_SLASHES),get_field("assessment_link_headline"),get_field("assessment_link_copy"),get_field("assessment_link_cta_text"));
        :php
          if (get_field("testimonial_section_type")=="link") {
        .col-md-6
          :php
            printf("<a class='homepage-panel-link centered' href='%s' data-bg-array='%s'><div class='inner'><h2>%s</h2><p>%s</p></div><div class='panel-cta'>%s<span class='fa fa-check-circle-o'></span></div></a>", get_field("testimonial_section_cta_link"),json_encode(get_field("testimonial_section_image"),JSON_UNESCAPED_SLASHES),get_field("testimonial_source_name"),get_field("testimonial_section_quote"),get_field("testimonial_section_cta_text"));
        :php
          }
          else {
        .col-md-6
          :php
            printf("<a class='homepage-panel-link modal-show has-quote' href='#' data-bg-array='%s'  data-video-modal-id='%s'><div class='inner'><p class='quote'>%s</p><cite>%s,<br><span class='job-title'>%s</span> @ <span class='company-name'>%s</span></cite></div><div class='panel-cta'>%s<span class='fa fa-play-circle-o'></span></div></a>",json_encode(get_field("testimonial_section_image"),JSON_UNESCAPED_SLASHES),get_field("testimonial_video_id"),get_field("testimonial_section_quote"),get_field("testimonial_source_name"),get_field("testimonial_source_title"),get_field("testimonial_source_company"),get_field("testimonial_section_cta_text"));
        :php
          }
block modals
